[2023-03-14 14:13:40.238 -05:00 ERR An error occurred using the connection to database '' on server 'localhost'.
][2023-03-14 14:13:40.290 -05:00 ERR Ocurrio un error durante la migracion
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure()' to the 'UseMySql' call.
 ---> MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.OpenTcpSocketAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 1146
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int32 startTickCount, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 438
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int32 startTickCount, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 942
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int32 startTickCount, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 948
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 423
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlRelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.HistoryRepository.ExistsAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\API\Program.cs:line 67
][2023-03-14 14:13:40.514 -05:00 INF User profile is available. Using 'C:\Users\luis.mercado.o\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-03-14 14:13:40.642 -05:00 INF Now listening on: http://localhost:5000
][2023-03-14 14:13:40.642 -05:00 INF Application started. Press Ctrl+C to shut down.
][2023-03-14 14:13:40.642 -05:00 INF Hosting environment: Development
][2023-03-14 14:13:40.642 -05:00 INF Content root path: C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\API
][2023-03-14 14:14:25.088 -05:00 INF Request starting HTTP/1.1 GET http://localhost:5000/api/WeatherForecast - -
][2023-03-14 14:14:25.178 -05:00 WRN Failed to determine the https port for redirect.
][2023-03-14 14:14:25.337 -05:00 INF Executing endpoint 'API.Controllers.WeatherForecastController.Get (API)'
][2023-03-14 14:14:25.348 -05:00 INF Route matched with {action = "Get", controller = "WeatherForecast"}. Executing controller action with signature System.Collections.Generic.IEnumerable`1[API.WeatherForecast] Get() on controller API.Controllers.WeatherForecastController (API).
][2023-03-14 14:14:25.349 -05:00 INF Hola desde el controller WeatherForecast
][2023-03-14 14:14:25.425 -05:00 INF Executing ObjectResult, writing value of type 'API.WeatherForecast[]'.
][2023-03-14 14:14:25.437 -05:00 INF Executed action API.Controllers.WeatherForecastController.Get (API) in 85.5777ms
][2023-03-14 14:14:25.437 -05:00 INF Executed endpoint 'API.Controllers.WeatherForecastController.Get (API)'
][2023-03-14 14:14:25.438 -05:00 INF Request finished HTTP/1.1 GET http://localhost:5000/api/WeatherForecast - - - 200 646 application/xml;+charset=utf-8 353.1964ms
][2023-03-14 14:14:26.443 -05:00 INF Request starting HTTP/1.1 GET http://localhost:5000/favicon.ico - -
][2023-03-14 14:14:26.447 -05:00 INF Request finished HTTP/1.1 GET http://localhost:5000/favicon.ico - - - 404 0 - 3.6365ms
][2023-03-14 14:21:59.263 -05:00 INF Application is shutting down...
][2023-03-14 14:22:13.073 -05:00 ERR An error occurred using the connection to database '' on server 'localhost'.
][2023-03-14 14:22:13.135 -05:00 ERR Ocurrio un error durante la migracion
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure()' to the 'UseMySql' call.
 ---> MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.OpenTcpSocketAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 1146
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int32 startTickCount, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 438
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int32 startTickCount, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 942
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int32 startTickCount, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 948
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 423
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlRelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.HistoryRepository.ExistsAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateAsync(String targetMigration, CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\API\Program.cs:line 67
][2023-03-14 14:22:13.237 -05:00 INF User profile is available. Using 'C:\Users\luis.mercado.o\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-03-14 14:22:13.292 -05:00 INF Now listening on: http://localhost:5000
][2023-03-14 14:22:13.292 -05:00 INF Application started. Press Ctrl+C to shut down.
][2023-03-14 14:22:13.292 -05:00 INF Hosting environment: Development
][2023-03-14 14:22:13.292 -05:00 INF Content root path: C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\API
][2023-03-14 14:22:32.134 -05:00 INF Request starting HTTP/1.1 POST http://localhost:5000/api/Usuarios/token application/json 67
][2023-03-14 14:22:32.205 -05:00 WRN Failed to determine the https port for redirect.
][2023-03-14 14:22:32.231 -05:00 INF Executing endpoint 'API.Controllers.UsuariosController.GetTokenAsync (API)'
][2023-03-14 14:22:32.249 -05:00 INF Route matched with {action = "GetToken", controller = "Usuarios"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(API.Dtos.LoginDto) on controller API.Controllers.UsuariosController (API).
][2023-03-14 14:22:32.542 -05:00 WRN Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
][2023-03-14 14:22:36.672 -05:00 ERR An error occurred using the connection to database 'tiendaBd' on server 'localhost'.
][2023-03-14 14:22:36.688 -05:00 ERR An exception occurred while iterating over the results of a query for context type 'Infraestructure.Data.TiendaContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure()' to the 'UseMySql' call.
 ---> MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.OpenTcpSocketAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 1146
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int32 startTickCount, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 438
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, String logMessage, Int32 startTickCount, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 403
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, String logMessage, Int32 startTickCount, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 408
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int32 startTickCount, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 98
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int32 startTickCount, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 128
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int32 startTickCount, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 929
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 423
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlRelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure()' to the 'UseMySql' call.
 ---> MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.OpenTcpSocketAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 1146
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int32 startTickCount, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 438
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, String logMessage, Int32 startTickCount, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 403
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, String logMessage, Int32 startTickCount, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 408
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int32 startTickCount, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 98
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int32 startTickCount, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 128
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int32 startTickCount, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 929
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 423
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlRelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
][2023-03-14 14:22:36.694 -05:00 INF Executed action API.Controllers.UsuariosController.GetTokenAsync (API) in 4442.9717ms
][2023-03-14 14:22:36.695 -05:00 INF Executed endpoint 'API.Controllers.UsuariosController.GetTokenAsync (API)'
][2023-03-14 14:22:36.707 -05:00 ERR An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure()' to the 'UseMySql' call.
 ---> MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.OpenTcpSocketAsync(ConnectionSettings cs, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 1146
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int32 startTickCount, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 438
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, String logMessage, Int32 startTickCount, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 403
   at MySqlConnector.Core.ConnectionPool.ConnectSessionAsync(MySqlConnection connection, String logMessage, Int32 startTickCount, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 408
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int32 startTickCount, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 98
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int32 startTickCount, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 128
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int32 startTickCount, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 929
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 423
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlRelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Infraestructure.Repositories.UsuarioRepository.GetByUsernameAsync(String username) in C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\Infraestructure\Repositories\UsuarioRepository.cs:line 27
   at API.Services.UserService.GetTokenAsync(LoginDto model) in C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\API\Services\UserService.cs:line 120
   at API.Controllers.UsuariosController.GetTokenAsync(LoginDto model) in C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\API\Controllers\UsuariosController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at AspNetCoreRateLimit.RateLimitMiddleware`1.Invoke(HttpContext context) in C:\Users\User\Documents\Github\AspNetCoreRateLimit\src\AspNetCoreRateLimit\Middleware\RateLimitMiddleware.cs:line 124
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
][2023-03-14 14:22:36.718 -05:00 INF Request finished HTTP/1.1 POST http://localhost:5000/api/Usuarios/token application/json 67 - 500 - text/plain;+charset=utf-8 4586.1270ms
][2023-03-14 14:23:23.150 -05:00 INF Request starting HTTP/1.1 POST http://localhost:5000/api/Usuarios/token application/json 67
][2023-03-14 14:23:23.161 -05:00 INF Executing endpoint 'API.Controllers.UsuariosController.GetTokenAsync (API)'
][2023-03-14 14:23:23.162 -05:00 INF Route matched with {action = "GetToken", controller = "Usuarios"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(API.Dtos.LoginDto) on controller API.Controllers.UsuariosController (API).
][2023-03-14 14:23:23.374 -05:00 INF Executed DbCommand (41ms) [Parameters=[@__ToLower_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`ApellidoMaterno`, `t`.`ApellidoPaterno`, `t`.`Email`, `t`.`Nombres`, `t`.`Password`, `t`.`Username`, `t0`.`UsuarioId`, `t0`.`RolId`, `t0`.`Id`, `t0`.`Nombre`, `r0`.`Id`, `r0`.`Created`, `r0`.`Expires`, `r0`.`Revoked`, `r0`.`Token`, `r0`.`UsuarioId`
FROM (
    SELECT `u`.`Id`, `u`.`ApellidoMaterno`, `u`.`ApellidoPaterno`, `u`.`Email`, `u`.`Nombres`, `u`.`Password`, `u`.`Username`
    FROM `Usuario` AS `u`
    WHERE LOWER(`u`.`Username`) = @__ToLower_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `u0`.`UsuarioId`, `u0`.`RolId`, `r`.`Id`, `r`.`Nombre`
    FROM `UsuariosRoles` AS `u0`
    INNER JOIN `Rol` AS `r` ON `u0`.`RolId` = `r`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`UsuarioId`
LEFT JOIN `RefreshToken` AS `r0` ON `t`.`Id` = `r0`.`UsuarioId`
ORDER BY `t`.`Id`, `t0`.`UsuarioId`, `t0`.`RolId`, `t0`.`Id`
][2023-03-14 14:23:23.655 -05:00 INF Executing OkObjectResult, writing value of type 'API.Dtos.DatosUsuarioDto'.
][2023-03-14 14:23:23.680 -05:00 INF Executed action API.Controllers.UsuariosController.GetTokenAsync (API) in 517.2604ms
][2023-03-14 14:23:23.680 -05:00 INF Executed endpoint 'API.Controllers.UsuariosController.GetTokenAsync (API)'
][2023-03-14 14:23:23.681 -05:00 INF Request finished HTTP/1.1 POST http://localhost:5000/api/Usuarios/token application/json 67 - 200 - application/json;+charset=utf-8 531.8732ms
][2023-03-14 14:23:38.298 -05:00 INF Request starting HTTP/1.1 POST http://localhost:5000/api/Productos application/json 132
][2023-03-14 14:23:38.339 -05:00 INF Executing endpoint 'API.Controllers.ProductosController.Post (API)'
][2023-03-14 14:23:38.342 -05:00 INF Route matched with {action = "Post", controller = "Productos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Core.Entities.Producto]] Post(API.Dtos.ProductoAddUpdateDto) on controller API.Controllers.ProductosController (API).
][2023-03-14 14:23:38.529 -05:00 ERR Failed executing DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Producto` (`CategoriaId`, `FechaCreacion`, `MarcaId`, `Nombre`, `Precio`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Producto`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
][2023-03-14 14:23:38.544 -05:00 ERR An exception occurred in the database while saving changes for context type 'Infraestructure.Data.TiendaContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Column 'Nombre' cannot be null
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsyncAwaited(ValueTask`1 task) in /_/src/MySqlConnector/Core/ServerSession.cs:line 962
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 43
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.CreateAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 468
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(IReadOnlyList`1 commands, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 344
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 337
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Column 'Nombre' cannot be null
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsyncAwaited(ValueTask`1 task) in /_/src/MySqlConnector/Core/ServerSession.cs:line 962
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 43
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.CreateAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 468
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(IReadOnlyList`1 commands, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 344
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 337
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
][2023-03-14 14:23:38.546 -05:00 INF Executed action API.Controllers.ProductosController.Post (API) in 203.2689ms
][2023-03-14 14:23:38.546 -05:00 INF Executed endpoint 'API.Controllers.ProductosController.Post (API)'
][2023-03-14 14:23:38.549 -05:00 ERR An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Column 'Nombre' cannot be null
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsyncAwaited(ValueTask`1 task) in /_/src/MySqlConnector/Core/ServerSession.cs:line 962
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 43
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.CreateAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 468
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(IReadOnlyList`1 commands, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 344
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 337
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infraestructure.UnitOfWork.UnitOfWork.SaveAsync() in C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\Infraestructure\UnitOfWork\UnitOfWork.cs:line 83
   at API.Controllers.ProductosController.Post(ProductoAddUpdateDto productoDto) in C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\API\Controllers\ProductosController.cs:line 88
   at lambda_method167(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at AspNetCoreRateLimit.RateLimitMiddleware`1.Invoke(HttpContext context) in C:\Users\User\Documents\Github\AspNetCoreRateLimit\src\AspNetCoreRateLimit\Middleware\RateLimitMiddleware.cs:line 124
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
][2023-03-14 14:23:38.553 -05:00 INF Request finished HTTP/1.1 POST http://localhost:5000/api/Productos application/json 132 - 500 - text/plain;+charset=utf-8 255.1411ms
][2023-03-14 14:25:24.437 -05:00 INF Request starting HTTP/1.1 POST http://localhost:5000/api/Productos application/json 132
][2023-03-14 14:25:24.443 -05:00 INF Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '14/03/2023 07:24:23 p. m.', Current time: '14/03/2023 07:25:24 p. m.'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
][2023-03-14 14:25:24.444 -05:00 INF Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '14/03/2023 07:24:23 p. m.', Current time: '14/03/2023 07:25:24 p. m.'.
][2023-03-14 14:25:24.446 -05:00 INF Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Administrador)
][2023-03-14 14:25:24.449 -05:00 INF AuthenticationScheme: Bearer was challenged.
][2023-03-14 14:25:24.450 -05:00 INF Request finished HTTP/1.1 POST http://localhost:5000/api/Productos application/json 132 - 401 0 - 12.5484ms
][2023-03-14 14:25:33.033 -05:00 INF Request starting HTTP/1.1 POST http://localhost:5000/api/Usuarios/refresh-token - 0
][2023-03-14 14:25:33.033 -05:00 INF Executing endpoint 'API.Controllers.UsuariosController.RefreshToken (API)'
][2023-03-14 14:25:33.036 -05:00 INF Route matched with {action = "RefreshToken", controller = "Usuarios"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller API.Controllers.UsuariosController (API).
][2023-03-14 14:25:33.058 -05:00 WRN Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
][2023-03-14 14:25:33.067 -05:00 INF Executed DbCommand (3ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`ApellidoMaterno`, `t`.`ApellidoPaterno`, `t`.`Email`, `t`.`Nombres`, `t`.`Password`, `t`.`Username`, `t0`.`UsuarioId`, `t0`.`RolId`, `t0`.`Id`, `t0`.`Nombre`, `r1`.`Id`, `r1`.`Created`, `r1`.`Expires`, `r1`.`Revoked`, `r1`.`Token`, `r1`.`UsuarioId`
FROM (
    SELECT `u`.`Id`, `u`.`ApellidoMaterno`, `u`.`ApellidoPaterno`, `u`.`Email`, `u`.`Nombres`, `u`.`Password`, `u`.`Username`
    FROM `Usuario` AS `u`
    WHERE EXISTS (
        SELECT 1
        FROM `RefreshToken` AS `r`
        WHERE (`u`.`Id` = `r`.`UsuarioId`) AND (`r`.`Token` = @__refreshToken_0))
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `u0`.`UsuarioId`, `u0`.`RolId`, `r0`.`Id`, `r0`.`Nombre`
    FROM `UsuariosRoles` AS `u0`
    INNER JOIN `Rol` AS `r0` ON `u0`.`RolId` = `r0`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`UsuarioId`
LEFT JOIN `RefreshToken` AS `r1` ON `t`.`Id` = `r1`.`UsuarioId`
ORDER BY `t`.`Id`, `t0`.`UsuarioId`, `t0`.`RolId`, `t0`.`Id`
][2023-03-14 14:25:33.101 -05:00 INF Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p13='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (Size = 200), @p9='?' (Size = 200), @p10='?' (Size = 200), @p11='?' (Size = 4000), @p12='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
UPDATE `RefreshToken` SET `Revoked` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

INSERT INTO `RefreshToken` (`Created`, `Expires`, `Revoked`, `Token`, `UsuarioId`)
VALUES (@p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

UPDATE `Usuario` SET `ApellidoMaterno` = @p7, `ApellidoPaterno` = @p8, `Email` = @p9, `Nombres` = @p10, `Password` = @p11, `Username` = @p12
WHERE `Id` = @p13;
SELECT ROW_COUNT();
][2023-03-14 14:25:33.148 -05:00 INF Executing OkObjectResult, writing value of type 'API.Dtos.DatosUsuarioDto'.
][2023-03-14 14:25:33.149 -05:00 INF Executed action API.Controllers.UsuariosController.RefreshToken (API) in 113.361ms
][2023-03-14 14:25:33.149 -05:00 INF Executed endpoint 'API.Controllers.UsuariosController.RefreshToken (API)'
][2023-03-14 14:25:33.149 -05:00 INF Request finished HTTP/1.1 POST http://localhost:5000/api/Usuarios/refresh-token - 0 - 200 - application/json;+charset=utf-8 116.6187ms
][2023-03-14 14:25:43.420 -05:00 INF Request starting HTTP/1.1 POST http://localhost:5000/api/Productos application/json 132
][2023-03-14 14:25:43.423 -05:00 INF Executing endpoint 'API.Controllers.ProductosController.Post (API)'
][2023-03-14 14:25:43.424 -05:00 INF Route matched with {action = "Post", controller = "Productos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Core.Entities.Producto]] Post(API.Dtos.ProductoAddUpdateDto) on controller API.Controllers.ProductosController (API).
][2023-03-14 14:25:43.429 -05:00 ERR Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Producto` (`CategoriaId`, `FechaCreacion`, `MarcaId`, `Nombre`, `Precio`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Producto`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
][2023-03-14 14:25:43.435 -05:00 ERR An exception occurred in the database while saving changes for context type 'Infraestructure.Data.TiendaContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Column 'Nombre' cannot be null
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsyncAwaited(ValueTask`1 task) in /_/src/MySqlConnector/Core/ServerSession.cs:line 962
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 43
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.CreateAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 468
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(IReadOnlyList`1 commands, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 344
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 337
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Column 'Nombre' cannot be null
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsyncAwaited(ValueTask`1 task) in /_/src/MySqlConnector/Core/ServerSession.cs:line 962
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 43
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.CreateAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 468
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(IReadOnlyList`1 commands, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 344
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 337
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
][2023-03-14 14:25:43.436 -05:00 INF Executed action API.Controllers.ProductosController.Post (API) in 12.5419ms
][2023-03-14 14:25:43.436 -05:00 INF Executed endpoint 'API.Controllers.ProductosController.Post (API)'
][2023-03-14 14:25:43.440 -05:00 ERR An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Column 'Nombre' cannot be null
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsyncAwaited(ValueTask`1 task) in /_/src/MySqlConnector/Core/ServerSession.cs:line 962
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 43
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.CreateAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 468
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(IReadOnlyList`1 commands, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 344
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 337
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infraestructure.UnitOfWork.UnitOfWork.SaveAsync() in C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\Infraestructure\UnitOfWork\UnitOfWork.cs:line 83
   at API.Controllers.ProductosController.Post(ProductoAddUpdateDto productoDto) in C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\API\Controllers\ProductosController.cs:line 88
   at lambda_method167(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at AspNetCoreRateLimit.RateLimitMiddleware`1.Invoke(HttpContext context) in C:\Users\User\Documents\Github\AspNetCoreRateLimit\src\AspNetCoreRateLimit\Middleware\RateLimitMiddleware.cs:line 124
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
][2023-03-14 14:25:43.442 -05:00 INF Request finished HTTP/1.1 POST http://localhost:5000/api/Productos application/json 132 - 500 - text/plain;+charset=utf-8 22.7488ms
][2023-03-14 14:27:01.697 -05:00 INF Application is shutting down...
][2023-03-14 14:27:07.451 -05:00 INF Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='tiendaBd' AND TABLE_NAME='__EFMigrationsHistory';
][2023-03-14 14:27:07.492 -05:00 INF Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='tiendaBd' AND TABLE_NAME='__EFMigrationsHistory';
][2023-03-14 14:27:07.516 -05:00 INF Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
][2023-03-14 14:27:07.530 -05:00 INF No migrations were applied. The database is already up to date.
][2023-03-14 14:27:07.674 -05:00 INF Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Marca` AS `m`)
][2023-03-14 14:27:07.683 -05:00 INF Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categoria` AS `c`)
][2023-03-14 14:27:07.686 -05:00 INF Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Producto` AS `p`)
][2023-03-14 14:27:07.690 -05:00 INF Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Rol` AS `r`)
][2023-03-14 14:27:07.791 -05:00 INF User profile is available. Using 'C:\Users\luis.mercado.o\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-03-14 14:27:07.859 -05:00 INF Now listening on: http://localhost:5000
][2023-03-14 14:27:07.861 -05:00 INF Application started. Press Ctrl+C to shut down.
][2023-03-14 14:27:07.861 -05:00 INF Hosting environment: Development
][2023-03-14 14:27:07.861 -05:00 INF Content root path: C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\API
][2023-03-14 14:27:33.469 -05:00 INF Request starting HTTP/1.1 POST http://localhost:5000/api/Usuarios/token application/json 67
][2023-03-14 14:27:33.555 -05:00 WRN Failed to determine the https port for redirect.
][2023-03-14 14:27:33.594 -05:00 INF Executing endpoint 'API.Controllers.UsuariosController.GetTokenAsync (API)'
][2023-03-14 14:27:33.613 -05:00 INF Route matched with {action = "GetToken", controller = "Usuarios"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(API.Dtos.LoginDto) on controller API.Controllers.UsuariosController (API).
][2023-03-14 14:27:33.800 -05:00 WRN Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
][2023-03-14 14:27:33.856 -05:00 INF Executed DbCommand (26ms) [Parameters=[@__ToLower_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`ApellidoMaterno`, `t`.`ApellidoPaterno`, `t`.`Email`, `t`.`Nombres`, `t`.`Password`, `t`.`Username`, `t0`.`UsuarioId`, `t0`.`RolId`, `t0`.`Id`, `t0`.`Nombre`, `r0`.`Id`, `r0`.`Created`, `r0`.`Expires`, `r0`.`Revoked`, `r0`.`Token`, `r0`.`UsuarioId`
FROM (
    SELECT `u`.`Id`, `u`.`ApellidoMaterno`, `u`.`ApellidoPaterno`, `u`.`Email`, `u`.`Nombres`, `u`.`Password`, `u`.`Username`
    FROM `Usuario` AS `u`
    WHERE LOWER(`u`.`Username`) = @__ToLower_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `u0`.`UsuarioId`, `u0`.`RolId`, `r`.`Id`, `r`.`Nombre`
    FROM `UsuariosRoles` AS `u0`
    INNER JOIN `Rol` AS `r` ON `u0`.`RolId` = `r`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`UsuarioId`
LEFT JOIN `RefreshToken` AS `r0` ON `t`.`Id` = `r0`.`UsuarioId`
ORDER BY `t`.`Id`, `t0`.`UsuarioId`, `t0`.`RolId`, `t0`.`Id`
][2023-03-14 14:27:34.074 -05:00 INF Executing OkObjectResult, writing value of type 'API.Dtos.DatosUsuarioDto'.
][2023-03-14 14:27:34.099 -05:00 INF Executed action API.Controllers.UsuariosController.GetTokenAsync (API) in 482.9219ms
][2023-03-14 14:27:34.100 -05:00 INF Executed endpoint 'API.Controllers.UsuariosController.GetTokenAsync (API)'
][2023-03-14 14:27:34.103 -05:00 INF Request finished HTTP/1.1 POST http://localhost:5000/api/Usuarios/token application/json 67 - 200 - application/json;+charset=utf-8 637.2151ms
][2023-03-14 14:27:37.571 -05:00 INF Request starting HTTP/1.1 POST http://localhost:5000/api/Productos application/json 132
][2023-03-14 14:27:37.611 -05:00 INF Executing endpoint 'API.Controllers.ProductosController.Post (API)'
][2023-03-14 14:27:37.614 -05:00 INF Route matched with {action = "Post", controller = "Productos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Core.Entities.Producto]] Post(API.Dtos.ProductoAddUpdateDto) on controller API.Controllers.ProductosController (API).
][2023-03-14 14:27:37.698 -05:00 INF Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
][2023-03-14 14:27:37.701 -05:00 INF Executed action API.Controllers.ProductosController.Post (API) in 86.4698ms
][2023-03-14 14:27:37.701 -05:00 INF Executed endpoint 'API.Controllers.ProductosController.Post (API)'
][2023-03-14 14:27:37.701 -05:00 INF Request finished HTTP/1.1 POST http://localhost:5000/api/Productos application/json 132 - 400 - application/problem+json;+charset=utf-8 129.9260ms
][2023-03-14 14:43:08.648 -05:00 INF Application is shutting down...
][2023-03-14 14:43:20.234 -05:00 INF Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='tiendaBd' AND TABLE_NAME='__EFMigrationsHistory';
][2023-03-14 14:43:20.283 -05:00 INF Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='tiendaBd' AND TABLE_NAME='__EFMigrationsHistory';
][2023-03-14 14:43:20.310 -05:00 INF Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
][2023-03-14 14:43:20.325 -05:00 INF No migrations were applied. The database is already up to date.
][2023-03-14 14:43:20.488 -05:00 INF Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Marca` AS `m`)
][2023-03-14 14:43:20.497 -05:00 INF Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categoria` AS `c`)
][2023-03-14 14:43:20.501 -05:00 INF Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Producto` AS `p`)
][2023-03-14 14:43:20.507 -05:00 INF Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Rol` AS `r`)
][2023-03-14 14:43:20.620 -05:00 INF User profile is available. Using 'C:\Users\luis.mercado.o\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-03-14 14:43:20.683 -05:00 INF Now listening on: http://localhost:5000
][2023-03-14 14:43:20.685 -05:00 INF Application started. Press Ctrl+C to shut down.
][2023-03-14 14:43:20.685 -05:00 INF Hosting environment: Development
][2023-03-14 14:43:20.685 -05:00 INF Content root path: C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\API
][2023-03-14 14:44:27.950 -05:00 INF Request starting HTTP/1.1 POST http://localhost:5000/api/Usuarios/token application/json 67
][2023-03-14 14:44:28.020 -05:00 WRN Failed to determine the https port for redirect.
][2023-03-14 14:44:28.046 -05:00 INF Executing endpoint 'API.Controllers.UsuariosController.GetTokenAsync (API)'
][2023-03-14 14:44:28.059 -05:00 INF Route matched with {action = "GetToken", controller = "Usuarios"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(API.Dtos.LoginDto) on controller API.Controllers.UsuariosController (API).
][2023-03-14 14:44:28.228 -05:00 WRN Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
][2023-03-14 14:44:28.283 -05:00 INF Executed DbCommand (26ms) [Parameters=[@__ToLower_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`ApellidoMaterno`, `t`.`ApellidoPaterno`, `t`.`Email`, `t`.`Nombres`, `t`.`Password`, `t`.`Username`, `t0`.`UsuarioId`, `t0`.`RolId`, `t0`.`Id`, `t0`.`Nombre`, `r0`.`Id`, `r0`.`Created`, `r0`.`Expires`, `r0`.`Revoked`, `r0`.`Token`, `r0`.`UsuarioId`
FROM (
    SELECT `u`.`Id`, `u`.`ApellidoMaterno`, `u`.`ApellidoPaterno`, `u`.`Email`, `u`.`Nombres`, `u`.`Password`, `u`.`Username`
    FROM `Usuario` AS `u`
    WHERE LOWER(`u`.`Username`) = @__ToLower_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `u0`.`UsuarioId`, `u0`.`RolId`, `r`.`Id`, `r`.`Nombre`
    FROM `UsuariosRoles` AS `u0`
    INNER JOIN `Rol` AS `r` ON `u0`.`RolId` = `r`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`UsuarioId`
LEFT JOIN `RefreshToken` AS `r0` ON `t`.`Id` = `r0`.`UsuarioId`
ORDER BY `t`.`Id`, `t0`.`UsuarioId`, `t0`.`RolId`, `t0`.`Id`
][2023-03-14 14:44:28.482 -05:00 INF Executing OkObjectResult, writing value of type 'API.Dtos.DatosUsuarioDto'.
][2023-03-14 14:44:28.504 -05:00 INF Executed action API.Controllers.UsuariosController.GetTokenAsync (API) in 442.5535ms
][2023-03-14 14:44:28.504 -05:00 INF Executed endpoint 'API.Controllers.UsuariosController.GetTokenAsync (API)'
][2023-03-14 14:44:28.508 -05:00 INF Request finished HTTP/1.1 POST http://localhost:5000/api/Usuarios/token application/json 67 - 200 - application/json;+charset=utf-8 559.7597ms
][2023-03-14 14:44:35.285 -05:00 INF Request starting HTTP/1.1 GET http://localhost:5000/api/Productos/3312 - -
][2023-03-14 14:44:35.329 -05:00 INF Executing endpoint 'API.Controllers.ProductosController.Get (API)'
][2023-03-14 14:44:35.337 -05:00 INF Route matched with {action = "Get", controller = "Productos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[API.Dtos.ProductoDto]] Get(Int32) on controller API.Controllers.ProductosController (API).
][2023-03-14 14:44:35.453 -05:00 INF Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CategoriaId`, `p`.`FechaCreacion`, `p`.`MarcaId`, `p`.`Nombre`, `p`.`Precio`, `m`.`Id`, `m`.`Nombre`, `c`.`Id`, `c`.`Nombre`
FROM `Producto` AS `p`
INNER JOIN `Marca` AS `m` ON `p`.`MarcaId` = `m`.`Id`
INNER JOIN `Categoria` AS `c` ON `p`.`CategoriaId` = `c`.`Id`
WHERE `p`.`Id` = @__id_0
LIMIT 1
][2023-03-14 14:44:35.498 -05:00 WRN An error occurred while trying to create an XmlSerializer for the type 'API.Helpers.Errors.ApiResponse'.
System.InvalidOperationException: API.Helpers.Errors.ApiResponse cannot be serialized because it does not have a parameterless constructor.
   at System.Xml.Serialization.TypeDesc.CheckSupported()
   at System.Xml.Serialization.TypeScope.GetTypeDesc(Type type, MemberInfo source, Boolean directReference, Boolean throwOnError)
   at System.Xml.Serialization.ModelScope.GetTypeModel(Type type, Boolean directReference)
   at System.Xml.Serialization.XmlReflectionImporter.ImportTypeMapping(Type type, XmlRootAttribute root, String defaultNamespace)
   at System.Xml.Serialization.XmlSerializer..ctor(Type type, String defaultNamespace)
   at Microsoft.AspNetCore.Mvc.Formatters.XmlSerializerOutputFormatter.CreateSerializer(Type type)
][2023-03-14 14:44:35.500 -05:00 WRN No output formatter was found for content types '["application/xml"]' to write the response.
][2023-03-14 14:44:35.501 -05:00 INF Executed action API.Controllers.ProductosController.Get (API) in 164.1953ms
][2023-03-14 14:44:35.501 -05:00 INF Executed endpoint 'API.Controllers.ProductosController.Get (API)'
][2023-03-14 14:44:35.502 -05:00 INF Request finished HTTP/1.1 GET http://localhost:5000/api/Productos/3312 - - - 406 0 - 216.7432ms
][2023-03-14 14:45:40.413 -05:00 INF Request starting HTTP/1.1 GET http://localhost:5000/api/Productos/3312 - -
][2023-03-14 14:45:40.421 -05:00 INF Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '14/03/2023 07:45:28 p. m.', Current time: '14/03/2023 07:45:40 p. m.'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
][2023-03-14 14:45:40.423 -05:00 INF Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '14/03/2023 07:45:28 p. m.', Current time: '14/03/2023 07:45:40 p. m.'.
][2023-03-14 14:45:40.426 -05:00 INF Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Administrador)
][2023-03-14 14:45:40.430 -05:00 INF AuthenticationScheme: Bearer was challenged.
][2023-03-14 14:45:40.430 -05:00 INF Request finished HTTP/1.1 GET http://localhost:5000/api/Productos/3312 - - - 401 0 - 16.9732ms
][2023-03-14 14:45:48.376 -05:00 INF Request starting HTTP/1.1 POST http://localhost:5000/api/Usuarios/refresh-token - 0
][2023-03-14 14:45:48.378 -05:00 INF Executing endpoint 'API.Controllers.UsuariosController.RefreshToken (API)'
][2023-03-14 14:45:48.380 -05:00 INF Route matched with {action = "RefreshToken", controller = "Usuarios"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller API.Controllers.UsuariosController (API).
][2023-03-14 14:45:48.395 -05:00 WRN Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
][2023-03-14 14:45:48.404 -05:00 INF Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`ApellidoMaterno`, `t`.`ApellidoPaterno`, `t`.`Email`, `t`.`Nombres`, `t`.`Password`, `t`.`Username`, `t0`.`UsuarioId`, `t0`.`RolId`, `t0`.`Id`, `t0`.`Nombre`, `r1`.`Id`, `r1`.`Created`, `r1`.`Expires`, `r1`.`Revoked`, `r1`.`Token`, `r1`.`UsuarioId`
FROM (
    SELECT `u`.`Id`, `u`.`ApellidoMaterno`, `u`.`ApellidoPaterno`, `u`.`Email`, `u`.`Nombres`, `u`.`Password`, `u`.`Username`
    FROM `Usuario` AS `u`
    WHERE EXISTS (
        SELECT 1
        FROM `RefreshToken` AS `r`
        WHERE (`u`.`Id` = `r`.`UsuarioId`) AND (`r`.`Token` = @__refreshToken_0))
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `u0`.`UsuarioId`, `u0`.`RolId`, `r0`.`Id`, `r0`.`Nombre`
    FROM `UsuariosRoles` AS `u0`
    INNER JOIN `Rol` AS `r0` ON `u0`.`RolId` = `r0`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`UsuarioId`
LEFT JOIN `RefreshToken` AS `r1` ON `t`.`Id` = `r1`.`UsuarioId`
ORDER BY `t`.`Id`, `t0`.`UsuarioId`, `t0`.`RolId`, `t0`.`Id`
][2023-03-14 14:45:48.508 -05:00 INF Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p13='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (Size = 200), @p9='?' (Size = 200), @p10='?' (Size = 200), @p11='?' (Size = 4000), @p12='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
UPDATE `RefreshToken` SET `Revoked` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

INSERT INTO `RefreshToken` (`Created`, `Expires`, `Revoked`, `Token`, `UsuarioId`)
VALUES (@p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

UPDATE `Usuario` SET `ApellidoMaterno` = @p7, `ApellidoPaterno` = @p8, `Email` = @p9, `Nombres` = @p10, `Password` = @p11, `Username` = @p12
WHERE `Id` = @p13;
SELECT ROW_COUNT();
][2023-03-14 14:45:48.535 -05:00 INF Executing OkObjectResult, writing value of type 'API.Dtos.DatosUsuarioDto'.
][2023-03-14 14:45:48.535 -05:00 INF Executed action API.Controllers.UsuariosController.RefreshToken (API) in 155.3741ms
][2023-03-14 14:45:48.536 -05:00 INF Executed endpoint 'API.Controllers.UsuariosController.RefreshToken (API)'
][2023-03-14 14:45:48.536 -05:00 INF Request finished HTTP/1.1 POST http://localhost:5000/api/Usuarios/refresh-token - 0 - 200 - application/json;+charset=utf-8 159.2368ms
][2023-03-14 14:45:53.082 -05:00 INF Request starting HTTP/1.1 GET http://localhost:5000/api/Productos/3312 - -
][2023-03-14 14:45:53.085 -05:00 INF Executing endpoint 'API.Controllers.ProductosController.Get (API)'
][2023-03-14 14:45:53.085 -05:00 INF Route matched with {action = "Get", controller = "Productos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[API.Dtos.ProductoDto]] Get(Int32) on controller API.Controllers.ProductosController (API).
][2023-03-14 14:45:53.092 -05:00 INF Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CategoriaId`, `p`.`FechaCreacion`, `p`.`MarcaId`, `p`.`Nombre`, `p`.`Precio`, `m`.`Id`, `m`.`Nombre`, `c`.`Id`, `c`.`Nombre`
FROM `Producto` AS `p`
INNER JOIN `Marca` AS `m` ON `p`.`MarcaId` = `m`.`Id`
INNER JOIN `Categoria` AS `c` ON `p`.`CategoriaId` = `c`.`Id`
WHERE `p`.`Id` = @__id_0
LIMIT 1
][2023-03-14 14:45:53.093 -05:00 INF Executing NotFoundObjectResult, writing value of type 'API.Helpers.Errors.ApiResponse'.
][2023-03-14 14:45:53.100 -05:00 INF Executed action API.Controllers.ProductosController.Get (API) in 14.8555ms
][2023-03-14 14:45:53.100 -05:00 INF Executed endpoint 'API.Controllers.ProductosController.Get (API)'
][2023-03-14 14:45:53.100 -05:00 INF Request finished HTTP/1.1 GET http://localhost:5000/api/Productos/3312 - - - 404 - application/json;+charset=utf-8 18.7316ms
][2023-03-14 14:45:58.775 -05:00 INF Request starting HTTP/1.1 GET http://localhost:5000/api/Productos/3312 - -
][2023-03-14 14:45:58.776 -05:00 INF Executing endpoint 'API.Controllers.ProductosController.Get (API)'
][2023-03-14 14:45:58.776 -05:00 INF Route matched with {action = "Get", controller = "Productos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[API.Dtos.ProductoDto]] Get(Int32) on controller API.Controllers.ProductosController (API).
][2023-03-14 14:45:58.781 -05:00 INF Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CategoriaId`, `p`.`FechaCreacion`, `p`.`MarcaId`, `p`.`Nombre`, `p`.`Precio`, `m`.`Id`, `m`.`Nombre`, `c`.`Id`, `c`.`Nombre`
FROM `Producto` AS `p`
INNER JOIN `Marca` AS `m` ON `p`.`MarcaId` = `m`.`Id`
INNER JOIN `Categoria` AS `c` ON `p`.`CategoriaId` = `c`.`Id`
WHERE `p`.`Id` = @__id_0
LIMIT 1
][2023-03-14 14:45:58.782 -05:00 WRN An error occurred while trying to create an XmlSerializer for the type 'API.Helpers.Errors.ApiResponse'.
System.InvalidOperationException: API.Helpers.Errors.ApiResponse cannot be serialized because it does not have a parameterless constructor.
   at System.Xml.Serialization.TypeDesc.CheckSupported()
   at System.Xml.Serialization.TypeScope.GetTypeDesc(Type type, MemberInfo source, Boolean directReference, Boolean throwOnError)
   at System.Xml.Serialization.ModelScope.GetTypeModel(Type type, Boolean directReference)
   at System.Xml.Serialization.XmlReflectionImporter.ImportTypeMapping(Type type, XmlRootAttribute root, String defaultNamespace)
   at System.Xml.Serialization.XmlSerializer..ctor(Type type, String defaultNamespace)
   at Microsoft.AspNetCore.Mvc.Formatters.XmlSerializerOutputFormatter.CreateSerializer(Type type)
][2023-03-14 14:45:58.783 -05:00 WRN No output formatter was found for content types '["application/xml"]' to write the response.
][2023-03-14 14:45:58.783 -05:00 INF Executed action API.Controllers.ProductosController.Get (API) in 6.5327ms
][2023-03-14 14:45:58.783 -05:00 INF Executed endpoint 'API.Controllers.ProductosController.Get (API)'
][2023-03-14 14:45:58.783 -05:00 INF Request finished HTTP/1.1 GET http://localhost:5000/api/Productos/3312 - - - 406 0 - 8.3015ms
][2023-03-14 15:15:08.194 -05:00 INF Application is shutting down...
][2023-03-14 15:15:18.187 -05:00 INF Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='tiendaBd' AND TABLE_NAME='__EFMigrationsHistory';
][2023-03-14 15:15:18.225 -05:00 INF Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='tiendaBd' AND TABLE_NAME='__EFMigrationsHistory';
][2023-03-14 15:15:18.247 -05:00 INF Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
][2023-03-14 15:15:18.259 -05:00 INF No migrations were applied. The database is already up to date.
][2023-03-14 15:15:18.378 -05:00 INF Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Marca` AS `m`)
][2023-03-14 15:15:18.385 -05:00 INF Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categoria` AS `c`)
][2023-03-14 15:15:18.389 -05:00 INF Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Producto` AS `p`)
][2023-03-14 15:15:18.393 -05:00 INF Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Rol` AS `r`)
][2023-03-14 15:15:18.492 -05:00 INF User profile is available. Using 'C:\Users\luis.mercado.o\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-03-14 15:15:18.547 -05:00 INF Now listening on: http://localhost:5000
][2023-03-14 15:15:18.549 -05:00 INF Application started. Press Ctrl+C to shut down.
][2023-03-14 15:15:18.549 -05:00 INF Hosting environment: Development
][2023-03-14 15:15:18.549 -05:00 INF Content root path: C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\API
][2023-03-14 15:15:45.298 -05:00 INF Request starting HTTP/1.1 GET http://localhost:5000/api/WeatherForecast - -
][2023-03-14 15:15:45.383 -05:00 WRN Failed to determine the https port for redirect.
][2023-03-14 15:15:45.417 -05:00 INF Executing endpoint 'API.Controllers.WeatherForecastController.Get (API)'
][2023-03-14 15:15:45.425 -05:00 INF Route matched with {action = "Get", controller = "WeatherForecast"}. Executing controller action with signature System.Collections.Generic.IEnumerable`1[API.WeatherForecast] Get() on controller API.Controllers.WeatherForecastController (API).
][2023-03-14 15:15:45.426 -05:00 INF Hola desde el controller WeatherForecast
][2023-03-14 15:15:45.431 -05:00 INF Executed action API.Controllers.WeatherForecastController.Get (API) in 3.2785ms
][2023-03-14 15:15:45.432 -05:00 INF Executed endpoint 'API.Controllers.WeatherForecastController.Get (API)'
][2023-03-14 15:15:45.461 -05:00 ERR Exception no controlada
System.Exception: Exception no controlada
   at API.Controllers.WeatherForecastController.Get() in C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\API\Controllers\WeatherForecastController.cs:line 23
   at lambda_method16(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at AspNetCoreRateLimit.RateLimitMiddleware`1.Invoke(HttpContext context) in C:\Users\User\Documents\Github\AspNetCoreRateLimit\src\AspNetCoreRateLimit\Middleware\RateLimitMiddleware.cs:line 124
   at API.Helpers.Errors.ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\API\Helpers\Errors\ExceptionMiddleware.cs:line 26
][2023-03-14 15:15:45.487 -05:00 INF Request finished HTTP/1.1 GET http://localhost:5000/api/WeatherForecast - - - 500 - application/json 191.4541ms
][2023-03-14 15:16:11.702 -05:00 INF Request starting HTTP/1.1 POST http://localhost:5000/api/Usuarios/token application/json 67
][2023-03-14 15:16:11.706 -05:00 INF Executing endpoint 'API.Controllers.UsuariosController.GetTokenAsync (API)'
][2023-03-14 15:16:11.715 -05:00 INF Route matched with {action = "GetToken", controller = "Usuarios"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(API.Dtos.LoginDto) on controller API.Controllers.UsuariosController (API).
][2023-03-14 15:16:11.905 -05:00 WRN Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
][2023-03-14 15:16:11.961 -05:00 INF Executed DbCommand (25ms) [Parameters=[@__ToLower_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`ApellidoMaterno`, `t`.`ApellidoPaterno`, `t`.`Email`, `t`.`Nombres`, `t`.`Password`, `t`.`Username`, `t0`.`UsuarioId`, `t0`.`RolId`, `t0`.`Id`, `t0`.`Nombre`, `r0`.`Id`, `r0`.`Created`, `r0`.`Expires`, `r0`.`Revoked`, `r0`.`Token`, `r0`.`UsuarioId`
FROM (
    SELECT `u`.`Id`, `u`.`ApellidoMaterno`, `u`.`ApellidoPaterno`, `u`.`Email`, `u`.`Nombres`, `u`.`Password`, `u`.`Username`
    FROM `Usuario` AS `u`
    WHERE LOWER(`u`.`Username`) = @__ToLower_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `u0`.`UsuarioId`, `u0`.`RolId`, `r`.`Id`, `r`.`Nombre`
    FROM `UsuariosRoles` AS `u0`
    INNER JOIN `Rol` AS `r` ON `u0`.`RolId` = `r`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`UsuarioId`
LEFT JOIN `RefreshToken` AS `r0` ON `t`.`Id` = `r0`.`UsuarioId`
ORDER BY `t`.`Id`, `t0`.`UsuarioId`, `t0`.`RolId`, `t0`.`Id`
][2023-03-14 15:16:12.168 -05:00 INF Executing OkObjectResult, writing value of type 'API.Dtos.DatosUsuarioDto'.
][2023-03-14 15:16:12.181 -05:00 INF Executed action API.Controllers.UsuariosController.GetTokenAsync (API) in 466.0317ms
][2023-03-14 15:16:12.181 -05:00 INF Executed endpoint 'API.Controllers.UsuariosController.GetTokenAsync (API)'
][2023-03-14 15:16:12.184 -05:00 INF Request finished HTTP/1.1 POST http://localhost:5000/api/Usuarios/token application/json 67 - 200 - application/json;+charset=utf-8 482.6804ms
][2023-03-14 15:16:23.904 -05:00 INF Request starting HTTP/1.1 PUT http://localhost:5000/api/Productos/322 application/json 187
][2023-03-14 15:16:23.974 -05:00 INF Executing endpoint 'API.Controllers.ProductosController.Put (API)'
][2023-03-14 15:16:23.979 -05:00 INF Route matched with {action = "Put", controller = "Productos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[API.Dtos.ProductoAddUpdateDto]] Put(Int32, API.Dtos.ProductoAddUpdateDto) on controller API.Controllers.ProductosController (API).
][2023-03-14 15:16:24.172 -05:00 INF Executed DbCommand (2ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Producto` SET `CategoriaId` = @p0, `FechaCreacion` = @p1, `MarcaId` = @p2, `Nombre` = @p3, `Precio` = @p4
WHERE `Id` = @p5;
SELECT ROW_COUNT();
][2023-03-14 15:16:24.190 -05:00 ERR An exception occurred in the database while saving changes for context type 'Infraestructure.Data.TiendaContext'.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
][2023-03-14 15:16:24.192 -05:00 INF Executed action API.Controllers.ProductosController.Put (API) in 213.4026ms
][2023-03-14 15:16:24.192 -05:00 INF Executed endpoint 'API.Controllers.ProductosController.Put (API)'
][2023-03-14 15:16:24.197 -05:00 ERR The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infraestructure.UnitOfWork.UnitOfWork.SaveAsync() in C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\Infraestructure\UnitOfWork\UnitOfWork.cs:line 83
   at API.Controllers.ProductosController.Put(Int32 id, ProductoAddUpdateDto productoDto) in C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\API\Controllers\ProductosController.cs:line 109
   at lambda_method176(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at AspNetCoreRateLimit.RateLimitMiddleware`1.Invoke(HttpContext context) in C:\Users\User\Documents\Github\AspNetCoreRateLimit\src\AspNetCoreRateLimit\Middleware\RateLimitMiddleware.cs:line 124
   at API.Helpers.Errors.ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\API\Helpers\Errors\ExceptionMiddleware.cs:line 26
][2023-03-14 15:16:24.200 -05:00 INF Request finished HTTP/1.1 PUT http://localhost:5000/api/Productos/322 application/json 187 - 500 - application/json 295.7391ms
][2023-03-14 15:52:02.332 -05:00 INF Application is shutting down...
][2023-03-14 15:52:11.962 -05:00 INF Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='tiendaBd' AND TABLE_NAME='__EFMigrationsHistory';
][2023-03-14 15:52:12.007 -05:00 INF Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='tiendaBd' AND TABLE_NAME='__EFMigrationsHistory';
][2023-03-14 15:52:12.029 -05:00 INF Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
][2023-03-14 15:52:12.043 -05:00 INF No migrations were applied. The database is already up to date.
][2023-03-14 15:52:12.165 -05:00 INF Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Marca` AS `m`)
][2023-03-14 15:52:12.172 -05:00 INF Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categoria` AS `c`)
][2023-03-14 15:52:12.176 -05:00 INF Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Producto` AS `p`)
][2023-03-14 15:52:12.181 -05:00 INF Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Rol` AS `r`)
][2023-03-14 15:52:12.282 -05:00 INF User profile is available. Using 'C:\Users\luis.mercado.o\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-03-14 15:52:12.336 -05:00 INF Now listening on: http://localhost:5000
][2023-03-14 15:52:12.338 -05:00 INF Application started. Press Ctrl+C to shut down.
][2023-03-14 15:52:12.338 -05:00 INF Hosting environment: Development
][2023-03-14 15:52:12.338 -05:00 INF Content root path: C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\API
][2023-03-14 15:52:14.238 -05:00 INF Request starting HTTP/1.1 POST http://localhost:5000/api/Usuarios/token application/json 67
][2023-03-14 15:52:14.310 -05:00 WRN Failed to determine the https port for redirect.
][2023-03-14 15:52:14.336 -05:00 INF Executing endpoint 'API.Controllers.UsuariosController.GetTokenAsync (API)'
][2023-03-14 15:52:14.350 -05:00 INF Route matched with {action = "GetToken", controller = "Usuarios"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(API.Dtos.LoginDto) on controller API.Controllers.UsuariosController (API).
][2023-03-14 15:52:14.525 -05:00 WRN Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
][2023-03-14 15:52:14.595 -05:00 INF Executed DbCommand (38ms) [Parameters=[@__ToLower_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`ApellidoMaterno`, `t`.`ApellidoPaterno`, `t`.`Email`, `t`.`Nombres`, `t`.`Password`, `t`.`Username`, `t0`.`UsuarioId`, `t0`.`RolId`, `t0`.`Id`, `t0`.`Nombre`, `r0`.`Id`, `r0`.`Created`, `r0`.`Expires`, `r0`.`Revoked`, `r0`.`Token`, `r0`.`UsuarioId`
FROM (
    SELECT `u`.`Id`, `u`.`ApellidoMaterno`, `u`.`ApellidoPaterno`, `u`.`Email`, `u`.`Nombres`, `u`.`Password`, `u`.`Username`
    FROM `Usuario` AS `u`
    WHERE LOWER(`u`.`Username`) = @__ToLower_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `u0`.`UsuarioId`, `u0`.`RolId`, `r`.`Id`, `r`.`Nombre`
    FROM `UsuariosRoles` AS `u0`
    INNER JOIN `Rol` AS `r` ON `u0`.`RolId` = `r`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`UsuarioId`
LEFT JOIN `RefreshToken` AS `r0` ON `t`.`Id` = `r0`.`UsuarioId`
ORDER BY `t`.`Id`, `t0`.`UsuarioId`, `t0`.`RolId`, `t0`.`Id`
][2023-03-14 15:52:14.805 -05:00 INF Executing OkObjectResult, writing value of type 'API.Dtos.DatosUsuarioDto'.
][2023-03-14 15:52:14.828 -05:00 INF Executed action API.Controllers.UsuariosController.GetTokenAsync (API) in 475.1583ms
][2023-03-14 15:52:14.829 -05:00 INF Executed endpoint 'API.Controllers.UsuariosController.GetTokenAsync (API)'
][2023-03-14 15:52:14.833 -05:00 INF Request finished HTTP/1.1 POST http://localhost:5000/api/Usuarios/token application/json 67 - 200 - application/json;+charset=utf-8 596.2939ms
][2023-03-14 15:52:22.579 -05:00 INF Request starting HTTP/1.1 POST http://localhost:5000/api/Productos application/json 132
][2023-03-14 15:52:22.620 -05:00 INF Executing endpoint 'API.Controllers.ProductosController.Post (API)'
][2023-03-14 15:52:22.624 -05:00 INF Route matched with {action = "Post", controller = "Productos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Core.Entities.Producto]] Post(API.Dtos.ProductoAddUpdateDto) on controller API.Controllers.ProductosController (API).
][2023-03-14 15:52:22.711 -05:00 INF Executing BadRequestObjectResult, writing value of type 'API.Helpers.Errors.ApiValidation'.
][2023-03-14 15:52:22.713 -05:00 INF Executed action API.Controllers.ProductosController.Post (API) in 88.5804ms
][2023-03-14 15:52:22.713 -05:00 INF Executed endpoint 'API.Controllers.ProductosController.Post (API)'
][2023-03-14 15:52:22.714 -05:00 INF Request finished HTTP/1.1 POST http://localhost:5000/api/Productos application/json 132 - 400 - application/json;+charset=utf-8 135.1811ms
]