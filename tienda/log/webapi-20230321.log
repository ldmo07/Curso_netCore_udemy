[2023-03-21 10:53:09.070 -05:00 INF Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='tiendaBd' AND TABLE_NAME='__EFMigrationsHistory';
][2023-03-21 10:53:09.120 -05:00 INF Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='tiendaBd' AND TABLE_NAME='__EFMigrationsHistory';
][2023-03-21 10:53:09.153 -05:00 INF Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
][2023-03-21 10:53:09.170 -05:00 INF No migrations were applied. The database is already up to date.
][2023-03-21 10:53:09.436 -05:00 INF Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Marca` AS `m`)
][2023-03-21 10:53:09.447 -05:00 INF Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categoria` AS `c`)
][2023-03-21 10:53:09.452 -05:00 INF Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Producto` AS `p`)
][2023-03-21 10:53:09.457 -05:00 INF Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Rol` AS `r`)
][2023-03-21 10:53:09.760 -05:00 INF User profile is available. Using 'C:\Users\luis.mercado.o\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
][2023-03-21 10:53:09.906 -05:00 INF Now listening on: http://localhost:5000
][2023-03-21 10:53:09.909 -05:00 INF Application started. Press Ctrl+C to shut down.
][2023-03-21 10:53:09.909 -05:00 INF Hosting environment: Development
][2023-03-21 10:53:09.910 -05:00 INF Content root path: C:\Proyectos\Dotnet\Curso-Udemy-Uniminuto\tienda\API
][2023-03-21 10:53:42.574 -05:00 INF Request starting HTTP/1.1 POST http://localhost:5000/api/Usuarios/token application/json 67
][2023-03-21 10:53:42.731 -05:00 WRN Failed to determine the https port for redirect.
][2023-03-21 10:53:42.997 -05:00 INF Executing endpoint 'API.Controllers.UsuariosController.GetTokenAsync (API)'
][2023-03-21 10:53:43.018 -05:00 INF Route matched with {action = "GetToken", controller = "Usuarios"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTokenAsync(API.Dtos.LoginDto) on controller API.Controllers.UsuariosController (API).
][2023-03-21 10:53:43.317 -05:00 WRN Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
][2023-03-21 10:53:43.419 -05:00 INF Executed DbCommand (36ms) [Parameters=[@__ToLower_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`ApellidoMaterno`, `t`.`ApellidoPaterno`, `t`.`Email`, `t`.`Nombres`, `t`.`Password`, `t`.`Username`, `t0`.`UsuarioId`, `t0`.`RolId`, `t0`.`Id`, `t0`.`Nombre`, `r0`.`Id`, `r0`.`Created`, `r0`.`Expires`, `r0`.`Revoked`, `r0`.`Token`, `r0`.`UsuarioId`
FROM (
    SELECT `u`.`Id`, `u`.`ApellidoMaterno`, `u`.`ApellidoPaterno`, `u`.`Email`, `u`.`Nombres`, `u`.`Password`, `u`.`Username`
    FROM `Usuario` AS `u`
    WHERE LOWER(`u`.`Username`) = @__ToLower_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `u0`.`UsuarioId`, `u0`.`RolId`, `r`.`Id`, `r`.`Nombre`
    FROM `UsuariosRoles` AS `u0`
    INNER JOIN `Rol` AS `r` ON `u0`.`RolId` = `r`.`Id`
) AS `t0` ON `t`.`Id` = `t0`.`UsuarioId`
LEFT JOIN `RefreshToken` AS `r0` ON `t`.`Id` = `r0`.`UsuarioId`
ORDER BY `t`.`Id`, `t0`.`UsuarioId`, `t0`.`RolId`, `t0`.`Id`
][2023-03-21 10:53:43.849 -05:00 INF Executing OkObjectResult, writing value of type 'API.Dtos.DatosUsuarioDto'.
][2023-03-21 10:53:43.898 -05:00 INF Executed action API.Controllers.UsuariosController.GetTokenAsync (API) in 874.127ms
][2023-03-21 10:53:43.899 -05:00 INF Executed endpoint 'API.Controllers.UsuariosController.GetTokenAsync (API)'
][2023-03-21 10:53:43.907 -05:00 INF Request finished HTTP/1.1 POST http://localhost:5000/api/Usuarios/token application/json 67 - 200 - application/json;+charset=utf-8 1336.2818ms
][2023-03-21 10:53:56.870 -05:00 INF Request starting HTTP/1.1 GET http://localhost:5000/api/Productos - -
][2023-03-21 10:53:56.947 -05:00 INF Executing endpoint 'API.Controllers.ProductosController.Get (API)'
][2023-03-21 10:53:56.962 -05:00 INF Route matched with {action = "Get", controller = "Productos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[API.Helpers.Pager`1[API.Dtos.ProductoListDto]]] Get(API.Helpers.Params) on controller API.Controllers.ProductosController (API).
][2023-03-21 10:53:57.182 -05:00 INF Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM `Producto` AS `p`
][2023-03-21 10:53:57.200 -05:00 WRN The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
][2023-03-21 10:53:57.201 -05:00 WRN The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
][2023-03-21 10:53:57.220 -05:00 INF Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoriaId`, `t`.`FechaCreacion`, `t`.`MarcaId`, `t`.`Nombre`, `t`.`Precio`, `c`.`Id`, `c`.`Nombre`, `m`.`Id`, `m`.`Nombre`
FROM (
    SELECT `p`.`Id`, `p`.`CategoriaId`, `p`.`FechaCreacion`, `p`.`MarcaId`, `p`.`Nombre`, `p`.`Precio`
    FROM `Producto` AS `p`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
INNER JOIN `Categoria` AS `c` ON `t`.`CategoriaId` = `c`.`Id`
INNER JOIN `Marca` AS `m` ON `t`.`MarcaId` = `m`.`Id`
][2023-03-21 10:53:57.249 -05:00 INF Executing ObjectResult, writing value of type 'API.Helpers.Pager`1[[API.Dtos.ProductoListDto, API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
][2023-03-21 10:53:57.271 -05:00 INF Executed action API.Controllers.ProductosController.Get (API) in 308.7902ms
][2023-03-21 10:53:57.271 -05:00 INF Executed endpoint 'API.Controllers.ProductosController.Get (API)'
][2023-03-21 10:53:57.272 -05:00 INF Request finished HTTP/1.1 GET http://localhost:5000/api/Productos - - - 200 - application/json;+charset=utf-8 402.2722ms
][2023-03-21 10:54:18.908 -05:00 INF Request starting HTTP/1.1 GET http://localhost:5000/api/Productos - -
][2023-03-21 10:54:18.917 -05:00 INF Executing endpoint 'API.Controllers.ProductosController.Get (API)'
][2023-03-21 10:54:18.917 -05:00 INF Route matched with {action = "Get", controller = "Productos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[API.Helpers.Pager`1[API.Dtos.ProductoListDto]]] Get(API.Helpers.Params) on controller API.Controllers.ProductosController (API).
][2023-03-21 10:54:18.928 -05:00 INF Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM `Producto` AS `p`
][2023-03-21 10:54:18.936 -05:00 INF Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoriaId`, `t`.`FechaCreacion`, `t`.`MarcaId`, `t`.`Nombre`, `t`.`Precio`, `c`.`Id`, `c`.`Nombre`, `m`.`Id`, `m`.`Nombre`
FROM (
    SELECT `p`.`Id`, `p`.`CategoriaId`, `p`.`FechaCreacion`, `p`.`MarcaId`, `p`.`Nombre`, `p`.`Precio`
    FROM `Producto` AS `p`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
INNER JOIN `Categoria` AS `c` ON `t`.`CategoriaId` = `c`.`Id`
INNER JOIN `Marca` AS `m` ON `t`.`MarcaId` = `m`.`Id`
][2023-03-21 10:54:19.062 -05:00 INF Executing ObjectResult, writing value of type 'API.Helpers.Pager`1[[API.Dtos.ProductoListDto, API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
][2023-03-21 10:54:19.070 -05:00 INF Executed action API.Controllers.ProductosController.Get (API) in 152.3605ms
][2023-03-21 10:54:19.070 -05:00 INF Executed endpoint 'API.Controllers.ProductosController.Get (API)'
][2023-03-21 10:54:19.070 -05:00 INF Request finished HTTP/1.1 GET http://localhost:5000/api/Productos - - - 200 1554 application/xml;+charset=utf-8 162.0481ms
][2023-03-21 10:54:52.593 -05:00 INF Request starting HTTP/1.1 GET http://localhost:5000/api/Productos/33 - -
][2023-03-21 10:54:52.596 -05:00 INF Executing endpoint 'API.Controllers.ProductosController.Get (API)'
][2023-03-21 10:54:52.600 -05:00 INF Route matched with {action = "Get", controller = "Productos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[API.Dtos.ProductoDto]] Get(Int32) on controller API.Controllers.ProductosController (API).
][2023-03-21 10:54:52.619 -05:00 INF Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CategoriaId`, `p`.`FechaCreacion`, `p`.`MarcaId`, `p`.`Nombre`, `p`.`Precio`, `m`.`Id`, `m`.`Nombre`, `c`.`Id`, `c`.`Nombre`
FROM `Producto` AS `p`
INNER JOIN `Marca` AS `m` ON `p`.`MarcaId` = `m`.`Id`
INNER JOIN `Categoria` AS `c` ON `p`.`CategoriaId` = `c`.`Id`
WHERE `p`.`Id` = @__id_0
LIMIT 1
][2023-03-21 10:54:52.633 -05:00 INF Executing ObjectResult, writing value of type 'API.Dtos.ProductoDto'.
][2023-03-21 10:54:52.637 -05:00 INF Executed action API.Controllers.ProductosController.Get (API) in 36.35ms
][2023-03-21 10:54:52.637 -05:00 INF Executed endpoint 'API.Controllers.ProductosController.Get (API)'
][2023-03-21 10:54:52.637 -05:00 INF Request finished HTTP/1.1 GET http://localhost:5000/api/Productos/33 - - - 200 362 application/xml;+charset=utf-8 44.7490ms
][2023-03-21 10:55:16.863 -05:00 INF Request starting HTTP/1.1 PUT http://localhost:5000/api/Productos/33 application/json 188
][2023-03-21 10:55:16.864 -05:00 INF Executing endpoint 'API.Controllers.ProductosController.Put (API)'
][2023-03-21 10:55:16.870 -05:00 INF Route matched with {action = "Put", controller = "Productos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[API.Dtos.ProductoAddUpdateDto]] Put(Int32, API.Dtos.ProductoAddUpdateDto) on controller API.Controllers.ProductosController (API).
][2023-03-21 10:55:16.889 -05:00 INF Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CategoriaId`, `p`.`FechaCreacion`, `p`.`MarcaId`, `p`.`Nombre`, `p`.`Precio`, `m`.`Id`, `m`.`Nombre`, `c`.`Id`, `c`.`Nombre`
FROM `Producto` AS `p`
INNER JOIN `Marca` AS `m` ON `p`.`MarcaId` = `m`.`Id`
INNER JOIN `Categoria` AS `c` ON `p`.`CategoriaId` = `c`.`Id`
WHERE `p`.`Id` = @__id_0
LIMIT 1
][2023-03-21 10:55:17.026 -05:00 INF Executed DbCommand (13ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Producto` SET `CategoriaId` = @p0, `FechaCreacion` = @p1, `MarcaId` = @p2, `Nombre` = @p3, `Precio` = @p4
WHERE `Id` = @p5;
SELECT ROW_COUNT();
][2023-03-21 10:55:17.038 -05:00 INF Executing ObjectResult, writing value of type 'API.Dtos.ProductoAddUpdateDto'.
][2023-03-21 10:55:17.040 -05:00 INF Executed action API.Controllers.ProductosController.Put (API) in 169.3144ms
][2023-03-21 10:55:17.040 -05:00 INF Executed endpoint 'API.Controllers.ProductosController.Put (API)'
][2023-03-21 10:55:17.040 -05:00 INF Request finished HTTP/1.1 PUT http://localhost:5000/api/Productos/33 application/json 188 - 200 - application/json;+charset=utf-8 177.4113ms
][2023-03-21 10:55:21.493 -05:00 INF Request starting HTTP/1.1 GET http://localhost:5000/api/Productos/33 - -
][2023-03-21 10:55:21.495 -05:00 INF Executing endpoint 'API.Controllers.ProductosController.Get (API)'
][2023-03-21 10:55:21.495 -05:00 INF Route matched with {action = "Get", controller = "Productos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[API.Dtos.ProductoDto]] Get(Int32) on controller API.Controllers.ProductosController (API).
][2023-03-21 10:55:21.502 -05:00 INF Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CategoriaId`, `p`.`FechaCreacion`, `p`.`MarcaId`, `p`.`Nombre`, `p`.`Precio`, `m`.`Id`, `m`.`Nombre`, `c`.`Id`, `c`.`Nombre`
FROM `Producto` AS `p`
INNER JOIN `Marca` AS `m` ON `p`.`MarcaId` = `m`.`Id`
INNER JOIN `Categoria` AS `c` ON `p`.`CategoriaId` = `c`.`Id`
WHERE `p`.`Id` = @__id_0
LIMIT 1
][2023-03-21 10:55:21.502 -05:00 INF Executing ObjectResult, writing value of type 'API.Dtos.ProductoDto'.
][2023-03-21 10:55:21.504 -05:00 INF Executed action API.Controllers.ProductosController.Get (API) in 8.4683ms
][2023-03-21 10:55:21.504 -05:00 INF Executed endpoint 'API.Controllers.ProductosController.Get (API)'
][2023-03-21 10:55:21.505 -05:00 INF Request finished HTTP/1.1 GET http://localhost:5000/api/Productos/33 - - - 200 382 application/xml;+charset=utf-8 11.5642ms
]